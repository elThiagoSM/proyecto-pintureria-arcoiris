-- Crear base de datos
CREATE DATABASE bd_pintureria_arcoiris;
USE bd_pintureria_arcoiris;

-- Tabla Usuarios
CREATE TABLE Usuarios (
    IDU INT AUTO_INCREMENT PRIMARY KEY,
    Nombre_Usuario VARCHAR(100) NOT NULL,
    correo VARCHAR(100) NOT NULL UNIQUE,
    contraseña VARCHAR(100) NOT NULL,
    clasificación VARCHAR(50),
    fecha_Ingreso DATE,
    Fecha_Actualización TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Tabla Clientes
CREATE TABLE Clientes (
    IDC INT AUTO_INCREMENT PRIMARY KEY,
    IDU INT,
    Nombre_Cliente VARCHAR(100) NOT NULL,
    Correo VARCHAR(100) NOT NULL UNIQUE,
    dirección VARCHAR(255),
    Datos_Contacto VARCHAR(255),
    Cédula VARCHAR(20) UNIQUE,
    Fecha_Nacimiento DATE,
    Fecha_actualización TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (IDU) REFERENCES Usuarios(IDU)
);

-- Tabla Ventas
CREATE TABLE Ventas (
    IDV INT AUTO_INCREMENT PRIMARY KEY,
    IDU INT,
    Forma_de_Pago VARCHAR(50),
    Fecha_de_Venta DATE,
    Productos_Vendidos TEXT,
    Valor_de_Venta DECIMAL(10, 2),
    Estado VARCHAR(50),
    Dirección_de_Envío VARCHAR(255),
    Datos_extra_notas TEXT,
    FOREIGN KEY (IDU) REFERENCES Usuarios(IDU)
);

-- Tabla Paleta_de_Color
CREATE TABLE Paleta_de_Color (
    CDC INT AUTO_INCREMENT PRIMARY KEY,
    Marca VARCHAR(100),
    Nombre_Color VARCHAR(100),
    Tintes_Utilizados TEXT
);

-- Tabla Productos
CREATE TABLE Productos (
    IDP INT AUTO_INCREMENT PRIMARY KEY,
    IDPROV INT,
    Nombre VARCHAR(100) NOT NULL,
    Precio DECIMAL(10, 2),
    Stock_Cantidad INT,
    Marca VARCHAR(100),
    Imagen VARCHAR(255),
    Descripción TEXT,
    Tipos_Productos VARCHAR(100),
    Fecha_Ultima_Actualización TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (IDPROV) REFERENCES Proveedores(IDPROV)
);

-- Tabla Proveedores
CREATE TABLE Proveedores (
    IDPROV INT AUTO_INCREMENT PRIMARY KEY,
    Nombre VARCHAR(100) NOT NULL,
    Teléfono VARCHAR(20),
    Correo VARCHAR(100) NOT NULL UNIQUE,
    Dirección VARCHAR(255)
);

-- Tabla Accesorios
CREATE TABLE Accesorios (
    IDP INT,
    Medidas VARCHAR(50),
    Tipo VARCHAR(100),
    FOREIGN KEY (IDP) REFERENCES Productos(IDP)
);

-- Tabla Mini-Ferreteria
CREATE TABLE Mini_Ferreteria (
    IDP INT,
    Garantía VARCHAR(100),
    FOREIGN KEY (IDP) REFERENCES Productos(IDP)
);

-- Tabla Pinturas
CREATE TABLE Pinturas (
    IDP INT,
    CDC INT,
    Litros DECIMAL(5, 2),
    Fecha_Vencimiento DATE,
    Fecha_Creación DATE,
    Terminación VARCHAR(100),
    Función_Aplicación TEXT,
    FOREIGN KEY (IDP) REFERENCES Productos(IDP),
    FOREIGN KEY (CDC) REFERENCES Paleta_de_Color(CDC)
);

-- Tabla Venta_de_Productos
CREATE TABLE Venta_de_Productos (
    IDV INT,
    IDP INT,
    Precio_del_Momento DECIMAL(10, 2),
    Cantidad INT,
    FOREIGN KEY (IDV) REFERENCES Ventas(IDV),
    FOREIGN KEY (IDP) REFERENCES Productos(IDP)
);
